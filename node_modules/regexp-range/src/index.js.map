{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Created by user on 2018/5/7/007.\n */\n\nimport { fill as _fillRange } from '@bluelovers/fill-range';\nimport { TABLE_RANGE } from '@lazy-cjk/regexp-range-table';\nimport { array_unique_overwrite } from 'array-hyper-unique';\n\nexport { TABLE_RANGE }\n\nexport type IOptions = {\n\n\t/**\n\t * 字元範圍表\n\t */\n\tdataTables?: typeof TABLE_RANGE,\n\n\t/**\n\t * 回傳 陣列\n\t */\n\tarrayMode?: boolean,\n\n\t/**\n\t * 回傳 字串\n\t */\n\tcreateRegExpString?: boolean,\n\t/**\n\t * 回傳由 [] 包覆的字串\n\t */\n\tcreateRegExpClass?: boolean,\n\n\t/**\n\t * 找到第一個就停止\n\t */\n\tfindFirstOne?: boolean,\n}\n\nexport function matchRange(from: string | number, to: string | number, options: IOptions & {\n\tcreateRegExpString: true,\n}): string\nexport function matchRange(from: string | number, to: string | number, options?: IOptions): string[]\nexport function matchRange(from: string | number, to: string | number, options: IOptions = {}): string[] | string\n{\n\toptions = getOptions(options);\n\n\tlet s = from as string;\n\tlet e = to as string;\n\n\tlet ret: string[] = [];\n\n\tlet findFirstOne = !!options.findFirstOne;\n\n\tObject\n\t\t.keys(options.dataTables)\n\t\t// @ts-ignore\n\t\t.some(function (key: keyof typeof options.dataTables): boolean\n\t\t{\n\t\t\tlet bool: boolean;\n\n\t\t\toptions.dataTables[key].some(function (arr): boolean\n\t\t\t{\n\t\t\t\tlet i = arr.indexOf(s);\n\t\t\t\tlet j = arr.indexOf(e, i);\n\n\t\t\t\tif (i !== -1 && j !== -1)\n\t\t\t\t{\n\t\t\t\t\tret.push(...arr.slice(i, j + 1));\n\n\t\t\t\t\tbool = true;\n\t\t\t\t\treturn findFirstOne;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (bool)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t})\n\t;\n\n\tif (!ret || !ret.length)\n\t{\n\t\treturn null;\n\t}\n\n\tarray_unique_overwrite(ret);\n\n\tif (options.createRegExpString)\n\t{\n\t\treturn toRegExpString(ret, options.createRegExpClass);\n\t}\n\n\treturn ret;\n}\n\nexport function toRegExpString(arr: string[], warpClass?: boolean)\n{\n\tif (arr.length === 1)\n\t{\n\t\treturn arr[0];\n\t}\n\n\tlet s = arr.join('');\n\n\treturn warpClass ? '[' + s + ']' : s;\n}\n\nexport function fillRange(from: string | number, to: string | number, options: IOptions = {}): string[]\n{\n\toptions = getOptions(options);\n\n\tlet s = from;\n\tlet e = to;\n\n\tlet ret: string[] = null;\n\n\tret = matchRange(from, to, options);\n\n\tif (!ret && (options.arrayMode || String(s).length === 1 && String(e).length === 1))\n\t{\n\t\tlet _ok: boolean;\n\n\t\tif (typeof s === 'string' && typeof e === 'string')\n\t\t{\n\t\t\tlet a = s.charCodeAt(0);\n\t\t\tlet b = e.charCodeAt(0);\n\n\t\t\t_ok = a <= b;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t_ok = true;\n\t\t}\n\n\t\tif (_ok)\n\t\t{\n\t\t\tret = _fillRange(s, e);\n\t\t}\n\n\t\tif (!ret?.length)\n\t\t{\n\t\t\tret = null;\n\t\t}\n\t}\n\n\tif (Array.isArray(ret))\n\t{\n\t\tret = ret.map(v => String(v));\n\t}\n\n\treturn ret;\n}\n\nexport function getOptions(options: IOptions): IOptions\n{\n\tlet opts = Object.assign({} as IOptions, options);\n\n\topts.dataTables = opts.dataTables || TABLE_RANGE;\n\n\treturn opts;\n}\n\n// @ts-ignore\nif (process.env.TSDX_FORMAT !== 'esm')\n{\n\tObject.defineProperty(matchRange, \"__esModule\", { value: true });\n\n\tObject.defineProperty(matchRange, 'matchRange', { value: matchRange });\n\tObject.defineProperty(matchRange, 'default', { value: matchRange });\n\n\tObject.defineProperty(matchRange, 'getOptions', {\n\t\tvalue: getOptions,\n\t});\n\tObject.defineProperty(matchRange, 'toRegExpString', {\n\t\tvalue: toRegExpString,\n\t});\n\tObject.defineProperty(matchRange, 'TABLE_RANGE', {\n\t\tvalue: TABLE_RANGE,\n\t});\n\tObject.defineProperty(matchRange, 'fillRange', {\n\t\tvalue: fillRange,\n\t});\n}\n\nexport default matchRange;\n"]}