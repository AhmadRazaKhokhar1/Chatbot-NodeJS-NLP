{"version":3,"file":"index.cjs.development.cjs","sources":["../src/index.ts","../src/index.cts"],"sourcesContent":["import { array_unique_indexOf } from '@lazy-array/util-unique';\nimport { ITSArrayListMaybeReadonly } from 'ts-type/lib/type/base';\n\nexport function sortObjectKeys<T extends Record<any, any>>(object: T, sortFn: IOptions<T>[\"sort\"]): T\nexport function sortObjectKeys<T extends Record<any, any>>(object: T, keyOrders: IOptions<T>[\"keys\"]): T\nexport function sortObjectKeys<T extends Record<any, any>>(object: T, options?: Omit<IOptions<T>, 'keys' | 'onlyKeys'> & {\n\tkeys: IOptions<T>[\"keys\"],\n\tonlyKeys: true,\n}): Partial<T>\nexport function sortObjectKeys<T extends Record<any, any>>(object: T, options?: Omit<IOptions<T>, 'useSource'> & {\n\tuseSource: true,\n}): T\nexport function sortObjectKeys<T extends Record<any, any>>(object: T, options?: IOptions<T>): T\nexport function sortObjectKeys<T extends Record<any, any>>(object: T, sortWith: unknown): T | Partial<T>\n{\n\tlet options: IOptions<T> = {};\n\n\tif (typeof sortWith === 'function')\n\t{\n\t\toptions.sort = sortWith as IOptions<T>[\"sort\"];\n\t}\n\telse if (Array.isArray(sortWith))\n\t{\n\t\toptions.keys = sortWith;\n\t}\n\telse\n\t{\n\t\toptions = Object.assign(options, sortWith);\n\t}\n\n\tlet {\n\t\tkeys = [],\n\t\tuseSource,\n\t} = options as {\n\t\tkeys: any[],\n\t\tuseSource: boolean,\n\t};\n\n\tif (Array.isArray(keys))\n\t{\n\t\tkeys = keys.slice();\n\t}\n\n\tif (options.onlyKeys)\n\t{\n\t\tuseSource = false;\n\n\t\tif (typeof keys.length !== 'number' || keys.length === 0)\n\t\t{\n\t\t\tthrow new ReferenceError(`options.key is empty or not exists.`)\n\t\t}\n\t}\n\telse\n\t{\n\t\tkeys = keys\n\t\t\t.concat(Object.keys(object).sort(options.sort))\n\t\t;\n\t}\n\n\tkeys = array_unique_indexOf(keys);\n\n\tif (options.desc)\n\t{\n\t\tkeys = keys.reverse()\n\t}\n\n\tlet ret = keys.reduce(function (total, key)\n\t{\n\t\tif (options.allowNotExists || key in object)\n\t\t{\n\t\t\ttotal[key] = object[key];\n\t\t}\n\n\t\treturn total;\n\t}, {} as Partial<T>);\n\n\tif (useSource)\n\t{\n\t\t(Object.keys(ret) as IOptions<T>[\"keys\"])\n\t\t\t.forEach(function (key)\n\t\t\t{\n\t\t\t\tdelete object[key];\n\t\t\t\tobject[key] = ret[key];\n\t\t\t})\n\t\t;\n\n\t\treturn object;\n\t}\n\n\treturn ret;\n}\n\nexport interface IOptions<T extends Record<any, any> = Record<any, any> , K extends string = Extract<keyof T, string>>\n{\n\t/**\n\t * key order\n\t */\n\tkeys?: ITSArrayListMaybeReadonly<string | K>,\n\t/**\n\t * return Object only keys\n\t * will disable useSource\n\t */\n\tonlyKeys?: boolean,\n\t/**\n\t * sort callback\n\t *\n\t * @param a\n\t * @param b\n\t * @returns {any}\n\t */\n\tsort?: (a: string | K, b: string | K) => number,\n\t/**\n\t * return reversed Object\n\t */\n\tdesc?: boolean,\n\tallowNotExists?: boolean,\n\t/**\n\t * return source Object\n\t */\n\tuseSource?: boolean,\n}\n\nexport { sortObjectKeys as sortObject }\n\nif (process.env.TSDX_FORMAT !== 'esm')\n{\n\n\tObject.defineProperty(sortObjectKeys, 'sortObjectKeys', { value: sortObjectKeys });\n\tObject.defineProperty(sortObjectKeys, 'sortObject', { value: sortObjectKeys });\n\tObject.defineProperty(sortObjectKeys, 'default', { value: sortObjectKeys });\n\tObject.defineProperty(sortObjectKeys, \"__esModule\", { value: true });\n\n}\n\nexport default sortObjectKeys;\n","import { sortObjectKeys } from './index';\n\n// @ts-ignore\nexport = sortObjectKeys\n"],"names":["sortObjectKeys","object","sortWith","options","sort","Array","isArray","keys","Object","assign","useSource","slice","onlyKeys","length","ReferenceError","concat","array_unique_indexOf","desc","reverse","ret","reduce","total","key","allowNotExists","forEach","defineProperty","value"],"mappings":"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"}