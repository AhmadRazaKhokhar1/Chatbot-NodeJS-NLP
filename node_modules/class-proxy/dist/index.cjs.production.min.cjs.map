{"version":3,"file":"index.cjs.production.min.cjs","sources":["../src/index.ts","../src/index.cts"],"sourcesContent":["/**\n * Created by user on 2018/2/11/011.\n */\n\n/**\n * The Class Proxy is used to define custom behavior for fundamental operations\n * (e.g. property lookup, assignment, enumeration, function invocation, etc).\n */\nexport function createClassProxy<T>(target: IClassProxyStatic<T>, handler: IClassProxyHandler): IClassProxyStatic<T>\n{\n\tlet construct: IClassProxyHandler[\"construct\"];\n\tif (handler.construct)\n\t{\n\t\tconstruct = handler.construct;\n\t}\n\n\treturn new Proxy(target, {\n\t\tconstruct(target, args)\n\t\t{\n\t\t\tlet obj: T;\n\t\t\tif (construct)\n\t\t\t{\n\t\t\t\tobj = construct(target, args);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tobj = new target(...args);\n\t\t\t}\n\n\t\t\treturn new Proxy(obj, handler);\n\t\t},\n\t});\n}\n\n/**\n * try skip type check version\n * @param target\n * @param {IClassProxyHandler} handler\n * @returns {T}\n */\nexport function createClassProxy2<T>(target, handler: IClassProxyHandler): T\n{\n\t// @ts-ignore\n\treturn createClassProxy(target, handler);\n}\n\nexport interface IClassProxyStatic<T>\n{\n\tnew(...argv): T;\n}\n\nexport interface IClassProxyHandler\n{\n\t/**\n\t * A trap for getting property values.\n\t * @param target\n\t * @param prop\n\t * @param receiver\n\t */\n\tget?(target, prop, receiver?),\n\n\t/**\n\t * A trap for setting property values.\n\t * @param target\n\t * @param property\n\t * @param value\n\t * @param receiver\n\t * @returns {boolean}\n\t */\n\tset?(target, property, value, receiver?): boolean,\n\n\t/**\n\t * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n\t * @param target\n\t * @returns {string[]}\n\t */\n\townKeys?(target): string[],\n\n\tgetOwnPropertyDescriptor?(target, prop): PropertyDescriptor & {\n\t\tvalue?: boolean,\n\t\twritable?: boolean,\n\t\tget?<T>(): T,\n\t\tset?(value): void,\n\t\tconfigurable?: boolean,\n\t\tenumerable?: boolean,\n\t},\n\n\t/**\n\t * A trap for the new operator.\n\t * @param target\n\t * @param {any[]} args\n\t * @returns {T}\n\t */\n\tconstruct?<T>(target, args?: any[]): T;\n\n\t/**\n\t * A trap for Object.getPrototypeOf.\n\t * @param target\n\t */\n\tgetPrototypeOf?(target),\n\n\t/**\n\t * A trap for Object.setPrototypeOf.\n\t * @param target\n\t * @param prototype\n\t * @returns {boolean}\n\t */\n\tsetPrototypeOf?(target, prototype): boolean,\n\n\t/**\n\t * A trap for Object.isExtensible.\n\t * @param target\n\t * @returns {boolean}\n\t */\n\tisExtensible?(target): boolean,\n\n\t/**\n\t * A trap for Object.preventExtensions.\n\t * @param target\n\t * @returns {boolean}\n\t */\n\tpreventExtensions?(target): boolean,\n\n\t/**\n\t * A trap for Object.getOwnPropertyDescriptor.\n\t * @param target\n\t * @param key\n\t * @param descriptor\n\t * @returns {boolean}\n\t */\n\tdefineProperty?(target, key, descriptor: PropertyDescriptor): boolean,\n\n\t/**\n\t * A trap for the in operator.\n\t * @param target\n\t * @param prop\n\t * @returns {boolean}\n\t */\n\thas?(target, prop): boolean,\n\n\t/**\n\t * A trap for the delete operator.\n\t * @param target\n\t * @param property\n\t * @returns {boolean}\n\t */\n\tdeleteProperty?(target, property): boolean,\n\n\t/**\n\t * A trap for a function call.\n\t * @param target\n\t * @param thisArg\n\t * @param {any[]} argumentsList\n\t */\n\tapply?(target, thisArg, argumentsList?: any[]),\n}\n\n// @ts-ignore\nif (process.env.TSDX_FORMAT !== 'esm')\n{\n\tObject.defineProperty(createClassProxy, \"__esModule\", { value: true });\n\n\tObject.defineProperty(createClassProxy, 'createClassProxy', { value: createClassProxy });\n\tObject.defineProperty(createClassProxy, 'createClassProxy2', { value: createClassProxy });\n\n\tObject.defineProperty(createClassProxy, 'default', { value: createClassProxy });\n}\n\nexport default createClassProxy;\n","/**\n * Created by user on 2018/2/11/011.\n */\n\nimport { createClassProxy } from './index';\n\n// @ts-ignore\nexport = createClassProxy;\n"],"names":["createClassProxy","target","handler","construct","Proxy","args","obj","Object","defineProperty","value","module","exports"],"mappings":";;AAQgB,SAAAA,iBAAoBC,GAA8BC;EAEjE,IAAIC;EAMJ,OALID,EAAQC,cAEXA,IAAYD,EAAQC,YAGd,IAAIC,MAAMH,GAAQ;IACxBE,UAAUF,GAAQI;MAEjB,IAAIC;MAUJ,OAPCA,IAFGH,IAEGA,EAAUF,GAAQI,KAIlB,IAAIJ,KAAUI,IAGd,IAAID,MAAME,GAAKJ;AACvB;;AAEF;;AAgICK,OAAOC,eAAeR,kBAAkB,cAAc;EAAES,QAAO;IAE/DF,OAAOC,eAAeR,kBAAkB,oBAAoB;EAAES,OAAOT;IACrEO,OAAOC,eAAeR,kBAAkB,qBAAqB;EAAES,OAAOT;IAEtEO,OAAOC,eAAeR,kBAAkB,WAAW;EAAES,OAAOT;IC/J7DU,OAAAC,UACSX"}