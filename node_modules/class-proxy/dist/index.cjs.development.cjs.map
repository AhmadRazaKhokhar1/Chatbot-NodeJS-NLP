{"version":3,"file":"index.cjs.development.cjs","sources":["../src/index.ts","../src/index.cts"],"sourcesContent":["/**\n * Created by user on 2018/2/11/011.\n */\n\n/**\n * The Class Proxy is used to define custom behavior for fundamental operations\n * (e.g. property lookup, assignment, enumeration, function invocation, etc).\n */\nexport function createClassProxy<T>(target: IClassProxyStatic<T>, handler: IClassProxyHandler): IClassProxyStatic<T>\n{\n\tlet construct: IClassProxyHandler[\"construct\"];\n\tif (handler.construct)\n\t{\n\t\tconstruct = handler.construct;\n\t}\n\n\treturn new Proxy(target, {\n\t\tconstruct(target, args)\n\t\t{\n\t\t\tlet obj: T;\n\t\t\tif (construct)\n\t\t\t{\n\t\t\t\tobj = construct(target, args);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tobj = new target(...args);\n\t\t\t}\n\n\t\t\treturn new Proxy(obj, handler);\n\t\t},\n\t});\n}\n\n/**\n * try skip type check version\n * @param target\n * @param {IClassProxyHandler} handler\n * @returns {T}\n */\nexport function createClassProxy2<T>(target, handler: IClassProxyHandler): T\n{\n\t// @ts-ignore\n\treturn createClassProxy(target, handler);\n}\n\nexport interface IClassProxyStatic<T>\n{\n\tnew(...argv): T;\n}\n\nexport interface IClassProxyHandler\n{\n\t/**\n\t * A trap for getting property values.\n\t * @param target\n\t * @param prop\n\t * @param receiver\n\t */\n\tget?(target, prop, receiver?),\n\n\t/**\n\t * A trap for setting property values.\n\t * @param target\n\t * @param property\n\t * @param value\n\t * @param receiver\n\t * @returns {boolean}\n\t */\n\tset?(target, property, value, receiver?): boolean,\n\n\t/**\n\t * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n\t * @param target\n\t * @returns {string[]}\n\t */\n\townKeys?(target): string[],\n\n\tgetOwnPropertyDescriptor?(target, prop): PropertyDescriptor & {\n\t\tvalue?: boolean,\n\t\twritable?: boolean,\n\t\tget?<T>(): T,\n\t\tset?(value): void,\n\t\tconfigurable?: boolean,\n\t\tenumerable?: boolean,\n\t},\n\n\t/**\n\t * A trap for the new operator.\n\t * @param target\n\t * @param {any[]} args\n\t * @returns {T}\n\t */\n\tconstruct?<T>(target, args?: any[]): T;\n\n\t/**\n\t * A trap for Object.getPrototypeOf.\n\t * @param target\n\t */\n\tgetPrototypeOf?(target),\n\n\t/**\n\t * A trap for Object.setPrototypeOf.\n\t * @param target\n\t * @param prototype\n\t * @returns {boolean}\n\t */\n\tsetPrototypeOf?(target, prototype): boolean,\n\n\t/**\n\t * A trap for Object.isExtensible.\n\t * @param target\n\t * @returns {boolean}\n\t */\n\tisExtensible?(target): boolean,\n\n\t/**\n\t * A trap for Object.preventExtensions.\n\t * @param target\n\t * @returns {boolean}\n\t */\n\tpreventExtensions?(target): boolean,\n\n\t/**\n\t * A trap for Object.getOwnPropertyDescriptor.\n\t * @param target\n\t * @param key\n\t * @param descriptor\n\t * @returns {boolean}\n\t */\n\tdefineProperty?(target, key, descriptor: PropertyDescriptor): boolean,\n\n\t/**\n\t * A trap for the in operator.\n\t * @param target\n\t * @param prop\n\t * @returns {boolean}\n\t */\n\thas?(target, prop): boolean,\n\n\t/**\n\t * A trap for the delete operator.\n\t * @param target\n\t * @param property\n\t * @returns {boolean}\n\t */\n\tdeleteProperty?(target, property): boolean,\n\n\t/**\n\t * A trap for a function call.\n\t * @param target\n\t * @param thisArg\n\t * @param {any[]} argumentsList\n\t */\n\tapply?(target, thisArg, argumentsList?: any[]),\n}\n\n// @ts-ignore\nif (process.env.TSDX_FORMAT !== 'esm')\n{\n\tObject.defineProperty(createClassProxy, \"__esModule\", { value: true });\n\n\tObject.defineProperty(createClassProxy, 'createClassProxy', { value: createClassProxy });\n\tObject.defineProperty(createClassProxy, 'createClassProxy2', { value: createClassProxy });\n\n\tObject.defineProperty(createClassProxy, 'default', { value: createClassProxy });\n}\n\nexport default createClassProxy;\n","/**\n * Created by user on 2018/2/11/011.\n */\n\nimport { createClassProxy } from './index';\n\n// @ts-ignore\nexport = createClassProxy;\n"],"names":["createClassProxy","target","handler","construct","Proxy","args","obj","Object","defineProperty","value"],"mappings":";;AAQgB,SAAAA,gBAAgB,CAAIC,MAA4B,EAAEC,OAA2B,EAAA;AAE5F,EAAA,IAAIC,SAA0C,CAAA;EAC9C,IAAID,OAAO,CAACC,SAAS,EACrB;IACCA,SAAS,GAAGD,OAAO,CAACC,SAAS,CAAA;AAC7B,GAAA;AAED,EAAA,OAAO,IAAIC,KAAK,CAACH,MAAM,EAAE;AACxBE,IAAAA,SAAS,CAACF,MAAM,EAAEI,IAAI,EAAA;AAErB,MAAA,IAAIC,GAAM,CAAA;AACV,MAAA,IAAIH,SAAS,EACb;AACCG,QAAAA,GAAG,GAAGH,SAAS,CAACF,MAAM,EAAEI,IAAI,CAAC,CAAA;AAC7B,OAAA,MAED;AACCC,QAAAA,GAAG,GAAG,IAAIL,MAAM,CAAC,GAAGI,IAAI,CAAC,CAAA;AACzB,OAAA;AAED,MAAA,OAAO,IAAID,KAAK,CAACE,GAAG,EAAEJ,OAAO,CAAC,CAAA;AAC/B,KAAA;AACA,GAAA,CAAC,CAAA;AACH,CAAA;AA+HA;AACCK,EAAAA,MAAM,CAACC,cAAc,CAACR,gBAAgB,EAAE,YAAY,EAAE;AAAES,IAAAA,KAAK,EAAE,IAAA;AAAI,GAAE,CAAC,CAAA;AAEtEF,EAAAA,MAAM,CAACC,cAAc,CAACR,gBAAgB,EAAE,kBAAkB,EAAE;AAAES,IAAAA,KAAK,EAAET,gBAAAA;AAAgB,GAAE,CAAC,CAAA;AACxFO,EAAAA,MAAM,CAACC,cAAc,CAACR,gBAAgB,EAAE,mBAAmB,EAAE;AAAES,IAAAA,KAAK,EAAET,gBAAAA;AAAgB,GAAE,CAAC,CAAA;AAEzFO,EAAAA,MAAM,CAACC,cAAc,CAACR,gBAAgB,EAAE,SAAS,EAAE;AAAES,IAAAA,KAAK,EAAET,gBAAAA;AAAgB,GAAE,CAAC,CAAA;AAC/E;;ACtKD;AACA;AACA;;AAIA;AAAA,MAAA,CAAA,OAAA,GACSA,gBAAgB;;"}