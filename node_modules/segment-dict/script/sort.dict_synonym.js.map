{"version":3,"file":"sort.dict_synonym.js","sourceRoot":"","sources":["sort.dict_synonym.ts"],"names":[],"mappings":";;;AAAA,+CAAuC;AACvC,uCAAkD;AAClD,4DAA0B;AAC1B,4DAAuD;AACvD,+EAA8C;AAE9C,iCAMgB;AAGhB,8DAMqC;AACrC,oEAAoE;AAEpE,IAAI,GAAG,GAAG,gBAAI,CAAC,IAAI,CAAC,wBAAa,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;AAExD,IAAI,YAAY,GAAG,CAAC,CAAC;AAErB,IAAI,UAAU,GAAG;IAChB,IAAI,EAAE,EAAyB;CAC/B,CAAC;AAEF,IAAA,eAAQ,EAAC,GAAG,EAAE;IACb,GAAG,IAAA,4BAAqB,GAAE;IAC1B,GAAG,IAAA,qBAAc,GAAE;CACnB,EAAE,EAAE,CAAC;KACJ,GAAG,CAAC,UAAU,EAAY;IAE1B,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC;QAE/B,IAAI,CAAC,GAAG,gBAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QAE9B,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAEb,oBAAoB;QAEjB,OAAO,CAAC,CAAC;IACV,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,sBAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAEjB,mBAAmB;AAClB,CAAC,CAAC;KACD,SAAS,CAAC,KAAK,WAAW,IAAY;IAEtC,IAAI,SAAS,GAAG,gBAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;IAEzC,sBAAO,CAAC,KAAK,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;IAEpC,sBAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IAExB,IAAI,IAAI,GAAG,MAAM,IAAA,0BAAQ,EAAC,IAAI,EAAE;QAC/B,QAAQ,CAAC,GAAG;YAEX,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC3B,CAAC;KACD,CAAC,CAAC;IAEH,IAAI,QAAQ,GAAG,IAAA,2CAA4B,EAAC,IAAI,CAAC,CAAC;IAElD,oBAAoB;IAEpB,IAAI,QAAQ,GAAG,IAAI,CAAC;IAEpB,IAAI,CAAC,EACL,CAAC;QACA,QAAQ,GAAG,gBAAI,CAAC,IAAI,CAAC,wBAAa,CAAC,SAAS,EAAE,gBAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC;IACzE,CAAC;IAED,IAAI,QAAQ,GAAG,IAAA,uBAAS,EAAC,QAAQ,CAAC,GAAG,MAAM,CAAC;IAE5C,MAAM,IAAA,qBAAU,EAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;IAErC,sBAAO,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;AAC5B,CAAC,CAAC;KACD,GAAG,CAAC,KAAK;IAET,IAAI,UAAU,CAAC,IAAI,CAAC,MAAM,EAC1B,CAAC;QACA,IAAI,IAAI,GAAG,IAAA,0BAAQ,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC;QACtC,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAErC,IAAI,QAAQ,GAAG,gBAAI,CAAC,IAAI,CAAC,wBAAa,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;QAE/D,MAAM,IAAA,qBAAU,EAAC,QAAQ,EAAE,MAAM,GAAG,IAAA,uBAAS,EAAC,QAAQ,CAAC,GAAG,MAAM,CAAC,CAAC;IACnE,CAAC;AACF,CAAC,CAAC,CACF","sourcesContent":["import { console } from \"debug-color2\";\nimport { appendFile, outputFile } from \"fs-extra\";\nimport path from \"upath2\";\nimport { serialize } from '@novel-segment/loader-line';\nimport ProjectConfig from \"../project.config\";\n\nimport {\n\tall_default_load_dict,\n\tall_extra_dict,\n\tgetCjkName,\n\tglobDict, zhDictCompare,\n\n} from './util';\nimport { array_unique } from 'array-hyper-unique';\n\nimport {\n\tchkLineType,\n\tEnumLineType,\n\tILoadDictFileRow2,\n\tloadDictFile,\n\tstringifyHandleDictLinesList,\n} from '@novel-segment/util-compare';\nimport { loadFile, SortList } from '@novel-segment/sort-dict-table';\n\nlet CWD = path.join(ProjectConfig.dict_root, 'segment');\n\nlet USE_CJK_MODE = 2;\n\nlet CACHE_LIST = {\n\tskip: [] as ILoadDictFileRow2[],\n};\n\nglobDict(CWD, [\n\t...all_default_load_dict(),\n\t...all_extra_dict(),\n], [])\n\t.tap(function (ls: string[])\n\t{\n\t\tlet a = ls.reduce(function (a, v)\n\t\t{\n\t\t\tlet p = path.relative(CWD, v);\n\n\t\t\ta.push(p);\n\n//\t\t\tconsole.dir(p);\n\n\t\t\treturn a;\n\t\t}, []);\n\n\t\tconsole.dir(a);\n\n//\t\tprocess.exit();\n\t})\n\t.mapSeries(async function (file: string)\n\t{\n\t\tlet _basepath = path.relative(CWD, file);\n\n\t\tconsole.debug(`[START]`, _basepath);\n\n\t\tconsole.time(_basepath);\n\n\t\tlet list = await loadFile(file, {\n\t\t\tcbIgnore(cur)\n\t\t\t{\n\t\t\t\tCACHE_LIST.skip.push(cur);\n\t\t\t},\n\t\t});\n\n\t\tlet out_list = stringifyHandleDictLinesList(list);\n\n\t\t//console.log(list);\n\n\t\tlet out_file = file;\n\n\t\tif (0)\n\t\t{\n\t\t\tout_file = path.join(ProjectConfig.temp_root, path.basename(_basepath));\n\t\t}\n\n\t\tlet out_data = serialize(out_list) + \"\\n\\n\";\n\n\t\tawait outputFile(out_file, out_data);\n\n\t\tconsole.timeEnd(_basepath);\n\t})\n\t.tap(async function ()\n\t{\n\t\tif (CACHE_LIST.skip.length)\n\t\t{\n\t\t\tlet list = SortList( CACHE_LIST.skip);\n\t\t\tlet out_list = list.map(v => v.line);\n\n\t\t\tlet out_file = path.join(ProjectConfig.temp_root, 'skip2.txt');\n\n\t\t\tawait appendFile(out_file, \"\\n\\n\" + serialize(out_list) + \"\\n\\n\");\n\t\t}\n\t})\n;\n"]}